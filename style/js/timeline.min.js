eventsMinDistance=60;
function initTimeline(a){a.each(function(){var a=$(this),b={};b.timelineWrapper=a.find(".events-wrapper");b.eventsWrapper=b.timelineWrapper.children(".events");b.fillingLine=b.eventsWrapper.children(".filling-line");b.timelineEvents=b.eventsWrapper.find("a");b.timelineDates=parseDate(b.timelineEvents);b.eventsMinLapse=minLapse(b.timelineDates);b.timelineNavigation=a.find(".cd-timeline-navigation");b.eventsContent=a.children(".events-content");setDatePosition(b,eventsMinDistance);var d=setTimelineWidth(b,
    eventsMinDistance);a.addClass("loaded");b.timelineNavigation.on("click",".next",function(a){a.preventDefault();updateSlide(b,d,"next")});b.timelineNavigation.on("click",".prev",function(a){a.preventDefault();updateSlide(b,d,"prev")});b.eventsWrapper.on("click","a",function(a){a.preventDefault();b.timelineEvents.removeClass("selected");$(this).addClass("selected");updateOlderEvents($(this));updateFilling($(this),b.fillingLine,d);updateVisibleContent($(this),b.eventsContent)});b.eventsContent.on("swipeleft",
    function(){"mobile"==checkMQ()&&showNewContent(b,d,"next")});b.eventsContent.on("swiperight",function(){"mobile"==checkMQ()&&showNewContent(b,d,"prev")});$(document).keyup(function(c){"37"==c.which&&elementInViewport(a.get(0))?showNewContent(b,d,"prev"):"39"==c.which&&elementInViewport(a.get(0))&&showNewContent(b,d,"next")})})}
function updateSlide(a,c,b){var d=getTranslateValue(a.eventsWrapper),e=Number(a.timelineWrapper.css("width").replace("px",""));"next"==b?translateTimeline(a,d-e+eventsMinDistance,e-c):translateTimeline(a,d+e-eventsMinDistance)}
function showNewContent(a,c,b){var d=a.eventsContent.find(".selected");if(0<("next"==b?d.next():d.prev()).length){var d=a.eventsWrapper.find(".selected"),e="next"==b?d.parent("li").next("li").children("a"):d.parent("li").prev("li").children("a");updateFilling(e,a.fillingLine,c);updateVisibleContent(e,a.eventsContent);e.addClass("selected");d.removeClass("selected");updateOlderEvents(e);updateTimelinePosition(b,e,a)}}
function updateTimelinePosition(a,c,b){c=window.getComputedStyle(c.get(0),null);c=Number(c.getPropertyValue("left").replace("px",""));var d=Number(b.timelineWrapper.css("width").replace("px","")),e=Number(b.eventsWrapper.css("width").replace("px","")),f=getTranslateValue(b.eventsWrapper);("next"==a&&c>d-f||"prev"==a&&c<-f)&&translateTimeline(b,-c+d/2,d-e)}
function translateTimeline(a,c,b){var d=a.eventsWrapper.get(0);c=0<c?0:c;c="undefined"!==typeof b&&c<b?b:c;setTransformValue(d,"translateX",c+"px");0==c?a.timelineNavigation.find(".prev").addClass("inactive"):a.timelineNavigation.find(".prev").removeClass("inactive");c==b?a.timelineNavigation.find(".next").addClass("inactive"):a.timelineNavigation.find(".next").removeClass("inactive")}
function updateFilling(a,c,b){var d=window.getComputedStyle(a.get(0),null);a=d.getPropertyValue("left");d=d.getPropertyValue("width");a=Number(a.replace("px",""))+Number(d.replace("px",""))/2;b=a/b;setTransformValue(c.get(0),"scaleX",b)}function setDatePosition(a,c){for(i=0;i<a.timelineDates.length;i++){var b=daydiff(a.timelineDates[0],a.timelineDates[i]),b=Math.round(b/a.eventsMinLapse)+2;a.timelineEvents.eq(i).css("left",b*c+"px")}}
function setTimelineWidth(a,c){var b=daydiff(a.timelineDates[0],a.timelineDates[a.timelineDates.length-1])/a.eventsMinLapse,b=Math.round(b)+4,b=b*c;a.eventsWrapper.css("width",b+"px");updateFilling(a.eventsWrapper.find("a.selected"),a.fillingLine,b);updateTimelinePosition("next",a.eventsWrapper.find("a.selected"),a);return b}
function updateVisibleContent(a,c){var b=a.data("date"),d=c.find(".selected"),e=c.find('[data-date="'+b+'"]'),b=e.height();if(e.index()>d.index())var f="selected enter-right",g="leave-left";else f="selected enter-left",g="leave-right";e.attr("class",f);d.attr("class",g).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){d.removeClass("leave-right leave-left");e.removeClass("enter-left enter-right")});c.css("height",b+"px")}
function updateOlderEvents(a){a.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}
function getTranslateValue(a){a=window.getComputedStyle(a.get(0),null);a=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform");0<=a.indexOf("(")?(a=a.split("(")[1],a=a.split(")")[0],a=a.split(","),a=a[4]):a=0;return Number(a)}
function setTransformValue(a,c,b){a.style["-webkit-transform"]=c+"("+b+")";a.style["-moz-transform"]=c+"("+b+")";a.style["-ms-transform"]=c+"("+b+")";a.style["-o-transform"]=c+"("+b+")";a.style.transform=c+"("+b+")"}
function parseDate(a){var c=[];a.each(function(){var a=$(this).data("date").split("T");if(1<a.length)var d=a[0].split("/"),a=a[1].split(":");else 0<=a[0].indexOf(":")?(d=["2000","0","0"],a=a[0].split(":")):(d=a[0].split("/"),a=["0","0"]);c.push(new Date(d[2],d[1]-1,d[0],a[0],a[1]))});return c}function daydiff(a,c){return Math.round(c-a)}function minLapse(a){var c=[];for(i=1;i<a.length;i++){var b=daydiff(a[i-1],a[i]);c.push(b)}return Math.min.apply(null,c)}
function elementInViewport(a){for(var c=a.offsetTop,b=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;a.offsetParent;)a=a.offsetParent,c+=a.offsetTop,b+=a.offsetLeft;return c<window.pageYOffset+window.innerHeight&&b<window.pageXOffset+window.innerWidth&&c+e>window.pageYOffset&&b+d>window.pageXOffset}function checkMQ(){return window.getComputedStyle(document.querySelector(".cd-horizontal-timeline"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")};